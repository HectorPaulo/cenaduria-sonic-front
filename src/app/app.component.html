<ion-app>
  <!-- Connection Status Indicator -->
  <app-connection-status></app-connection-status>

  <ion-split-pane contentId="main-content">
    <ion-menu contentId="main-content" type="overlay" [disabled]="!isLoggedIn">
      <ion-content class="sidebar-content">
        <!-- Header Section -->
        <div class="sidebar-header">
          <div class="logo-container">
            <div class="logo-icon"></div>
            <h1 class="logo-text">Cenadur铆a Sonic</h1>
          </div>

          <!-- User Info -->
          @if (isLoggedIn && currentUser) {
          <div class="user-card">
            <div class="user-avatar">
              {{ currentUser.nombre?.charAt(0).toUpperCase() || "U" }}
            </div>
            <div class="user-info">
              <div class="user-name">{{ currentUser.nombre }}</div>
              <div class="user-role">{{ roleName }}</div>
            </div>
          </div>
          } @else {
          <div class="welcome-card">
            <div class="welcome-icon"></div>
            <div class="welcome-text">
              <div class="welcome-title">隆Bienvenido!</div>
              <div class="welcome-subtitle">Inicia sesi贸n para continuar</div>
            </div>
          </div>
          }
        </div>

        <!-- Navigation Menu -->
        @if (isLoggedIn) {
        <div class="sidebar-nav">
          <div class="nav-section-title">Navegaci贸n</div>

          @for (p of currentMenuPages; track p; let i = $index) {
          <ion-menu-toggle auto-hide="false">
            <div
              class="nav-item"
              routerDirection="root"
              [routerLink]="[p.url]"
              routerLinkActive="nav-item-active"
            >
              <ion-icon [name]="p.icon" class="nav-icon"></ion-icon>
              <span class="nav-label">{{ p.title }}</span>
              <ion-icon name="chevron-forward" class="nav-arrow"></ion-icon>
            </div>
          </ion-menu-toggle>
          }

          <!-- Logout Button -->
          <div class="nav-divider"></div>
          <ion-menu-toggle auto-hide="false">
            <div class="nav-item logout-item" (click)="logout()">
              <ion-icon name="log-out" class="nav-icon"></ion-icon>
              <span class="nav-label">Cerrar Sesi贸n</span>
              <ion-icon name="chevron-forward" class="nav-arrow"></ion-icon>
            </div>
          </ion-menu-toggle>
        </div>
        }

        <!-- Footer -->
        <div class="sidebar-footer">
          <div class="footer-text">Versi贸n 1.0.0</div>
          <div class="footer-copyright">漏 2025 Cenadur铆a Sonic</div>
        </div>
      </ion-content>
    </ion-menu>
    <ion-router-outlet id="main-content"></ion-router-outlet>
  </ion-split-pane>
</ion-app>
