<app-header titulo="Pedidos"></app-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <div class="pedidos-header">
    <h2>Pedidos Activos</h2>
    <p>Gestiona el estado de los pedidos en tiempo real</p>
  </div>

  <ion-list>
    @for (pedido of pedidos; track $index) {
      
      <ion-item class="pedido-item">
        <ion-label>
          <div class="pedido-header">
          <h3>{{ pedido.id }} - {{ pedido.cliente }}</h3>
          <ion-badge [color]="getEstadoColor(pedido.estado)">
            <ion-icon [name]="getEstadoIcon(pedido.estado)"></ion-icon>
            {{ getEstadoTexto(pedido.estado) }}
          </ion-badge>
        </div>

        <div class="pedido-details">
          <p><strong>Items:</strong> {{ pedido.items.join(', ') }}</p>
          <p><strong>Total:</strong> ${{ pedido.total }}</p>
          <p><strong>Hora:</strong> {{ pedido.tiempo }}</p>
        </div>

        @if (pedido.estado !== 'listo') {

          <div class="pedido-actions">
            @if (pedido.estado === 'pendiente') {

              <ion-button
              size="small"
              color="primary"
              (click)="cambiarEstado(pedido, 'preparando')"
              >
              <ion-icon name="restaurant" slot="start"></ion-icon>
              Iniciar Preparaci√≥n
            </ion-button>
          }
        
        @if (pedido.estado === 'preparando') {
          <ion-button
          size="small"
          color="success"
            (click)="cambiarEstado(pedido, 'listo')"
            >
            <ion-icon name="checkmark" slot="start"></ion-icon>
            Marcar Listo
          </ion-button>
        }
      </div>
    }
      </ion-label>
    </ion-item>
  }
  </ion-list>
</ion-content>
