{"openapi":"3.0.1","info":{"title":"Food Truck API","description":"API para la gestión de food trucks","version":"1.0"},"servers":[{"url":"http://localhost:8081","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"WebSocket Documentation","description":"Información sobre conexión y uso de WebSocket para notificaciones en tiempo real"},{"name":"Products","description":"Gestión de productos del foodtruck"},{"name":"Orders","description":"Gestión completa de órdenes del foodtruck"},{"name":"Perfil de Usuario","description":"Gestión del perfil del usuario"},{"name":"Promotions","description":"Gestión de promociones del foodtruck"},{"name":"Categorías","description":"Gestión de categorías de productos del food truck"},{"name":"Autenticación","description":"Endpoints relacionados con el registro, inicio de sesión y actualización de tokens JWT."}],"paths":{"/api/promotions/{id}":{"get":{"tags":["Promotions"],"summary":"Obtener promoción por ID","description":"Obtiene una promoción específica con todos sus detalles","operationId":"getPromotionById","parameters":[{"name":"id","in":"path","description":"ID de la promoción","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Promoción encontrada","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromotionDetailResponse"}}}},"404":{"description":"Promoción no encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PromotionDetailResponse"}}}}}},"put":{"tags":["Promotions"],"summary":"Actualizar una promoción existente","description":"Actualiza los datos de una promoción existente. Solo se actualizan los campos proporcionados.","operationId":"updatePromotion","parameters":[{"name":"id","in":"path","description":"ID de la promoción","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePromotionRequest"}}},"required":true},"responses":{"200":{"description":"Promoción actualizada correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromotionDetailResponse"}}}},"400":{"description":"Datos de entrada inválidos","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PromotionDetailResponse"}}}},"404":{"description":"Promoción no encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PromotionDetailResponse"}}}},"409":{"description":"Conflicto con reglas de negocio","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PromotionDetailResponse"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Promotions"],"summary":"Eliminar promoción","description":"Elimina permanentemente una promoción del sistema. Solo se pueden eliminar promociones inactivas.","operationId":"deletePromotion","parameters":[{"name":"id","in":"path","description":"ID de la promoción","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"204":{"description":"Promoción eliminada correctamente"},"404":{"description":"Promoción no encontrada"},"409":{"description":"No se puede eliminar promoción activa"}},"security":[{"bearerAuth":[]}]}},"/api/profile/password":{"put":{"tags":["Perfil de Usuario"],"summary":"Cambiar contraseña","description":"Permite al usuario cambiar su contraseña actual.\n\n**Autenticación requerida:** Este endpoint requiere un token JWT válido en el header Authorization.\n\n**Formato del header:**\n```\nAuthorization: Bearer <token-jwt>\n```\n","operationId":"changePassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordRequest"}}},"required":true},"responses":{"200":{"description":"Contraseña cambiada correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordResponse"},"examples":{"Éxito":{"description":"Éxito","value":{"message":"Contraseña cambiada correctamente","username":"daniel","timestamp":"2025-10-09T18:30:45.123"}}}}}},"400":{"description":"Datos inválidos o contraseñas no coinciden","content":{"application/json":{"examples":{"Contraseña actual incorrecta":{"description":"Contraseña actual incorrecta","value":{"error":"Contraseña actual incorrecta","message":"La contraseña actual es incorrecta","timestamp":"2025-10-09T18:30:45.123"}},"Contraseñas no coinciden":{"description":"Contraseñas no coinciden","value":{"error":"Contraseñas no coinciden","message":"Las contraseñas no coinciden","timestamp":"2025-10-09T18:30:45.123"}},"Nueva contraseña igual":{"description":"Nueva contraseña igual","value":{"error":"Bad Request","message":"La nueva contraseña debe ser diferente a la actual","timestamp":"2025-10-09T18:30:45.123"}}}}}},"404":{"description":"Usuario no encontrado","content":{"application/json":{"examples":{"Usuario inexistente":{"description":"Usuario inexistente","value":{"error":"Usuario no encontrado","message":"Usuario no encontrado","timestamp":"2025-10-09T18:30:45.123"}}}}}},"401":{"description":"No autorizado","content":{"application/json":{"examples":{"Sin autenticación":{"description":"Sin autenticación","value":{"error":"Unauthorized","message":"Token JWT requerido","timestamp":"2025-10-09T18:30:45.123"}}}}}}},"security":[{"bearerAuth":[]}]}},"/api/profile/avatar":{"put":{"tags":["Perfil de Usuario"],"summary":"Actualizar foto de perfil","description":"Permite al usuario cambiar su foto de perfil mediante el envío de un archivo de imagen.\nEl archivo debe enviarse como multipart/form-data con la clave 'avatar'.\nFormatos soportados: JPG, JPEG, PNG, GIF.\nTamaño máximo: 5MB.\n\n**Autenticación requerida:** Este endpoint requiere un token JWT válido en el header Authorization.\n\n**Formato del header:**\n```\nAuthorization: Bearer <token-jwt>\n```\n","operationId":"updateAvatar","requestBody":{"description":"Archivo de imagen para el avatar del usuario","content":{"multipart/form-data":{"schema":{"required":["avatar"],"type":"object"},"examples":{"Subir avatar":{"description":"Selecciona un archivo de imagen (JPG, JPEG, PNG, GIF) con el campo 'avatar'"}}}},"required":true},"responses":{"200":{"description":"Avatar actualizado correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAvatarResponse"},"examples":{"Éxito":{"description":"Éxito","value":{"message":"Avatar actualizado correctamente","avatarUrl":"http://localhost:8081/public/avatars/daniel_12345.jpg","username":"daniel","timestamp":"2025-10-09T16:30:45.123"}}}}}},"400":{"description":"Archivo vacío o formato inválido","content":{"application/json":{"examples":{"Archivo vacío":{"description":"Archivo vacío","value":{"error":"Archivo vacío","message":"El archivo no puede estar vacío","timestamp":"2025-10-09T16:30:45.123"}},"Formato inválido":{"description":"Formato inválido","value":{"error":"Formato de archivo inválido","message":"El archivo debe ser una imagen válida (JPG, JPEG, PNG, GIF)","timestamp":"2025-10-09T16:30:45.123"}}}}}},"413":{"description":"Archivo demasiado grande","content":{"application/json":{"examples":{"Archivo muy grande":{"description":"Archivo muy grande","value":{"error":"Archivo demasiado grande","message":"El archivo no puede exceder los 5MB","timestamp":"2025-10-09T16:30:45.123"}}}}}},"404":{"description":"Usuario no encontrado","content":{"application/json":{"examples":{"Usuario inexistente":{"description":"Usuario inexistente","value":{"error":"Usuario no encontrado","message":"Usuario no encontrado","timestamp":"2025-10-09T16:30:45.123"}}}}}},"401":{"description":"No autorizado","content":{"application/json":{"examples":{"Sin autenticación":{"description":"Sin autenticación","value":{"error":"Unauthorized","message":"Token JWT requerido","timestamp":"2025-10-09T16:30:45.123"}}}}}}},"security":[{"bearerAuth":[]}]}},"/api/products/{id}":{"get":{"tags":["Products"],"summary":"Obtener producto por ID","description":"Busca un producto específico por su identificador único","operationId":"getProductById","parameters":[{"name":"id","in":"path","description":"ID del producto","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Producto encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"404":{"description":"Producto no encontrado","content":{"application/json":{"examples":{"Producto no encontrado":{"description":"Producto no encontrado","value":{"error":"PRODUCT_NOT_FOUND","message":"Producto con ID 999 no encontrado"}}}}}}}},"put":{"tags":["Products"],"summary":"Actualizar producto","description":"Actualiza los datos de un producto existente","operationId":"updateProduct","parameters":[{"name":"id","in":"path","description":"ID del producto","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Producto actualizado correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"400":{"description":"Datos de entrada inválidos","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"404":{"description":"Producto no encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"409":{"description":"Ya existe un producto con ese nombre","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}}}},"delete":{"tags":["Products"],"summary":"Eliminar producto","description":"Elimina permanentemente un producto del sistema","operationId":"deleteProduct","parameters":[{"name":"id","in":"path","description":"ID del producto","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"204":{"description":"Producto eliminado correctamente"},"404":{"description":"Producto no encontrado"}}}},"/api/orders/{orderId}":{"get":{"tags":["Orders"],"summary":"Obtener una orden por ID","description":"Obtiene los detalles completos de una orden específica. Los usuarios solo pueden ver sus propias órdenes, los empleados y administradores pueden ver cualquier orden.","operationId":"getOrderById","parameters":[{"name":"orderId","in":"path","description":"ID de la orden","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Orden encontrada","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderDetailResponse"}}}},"403":{"description":"Sin permisos para ver esta orden","content":{"application/json":{"examples":{"Acceso denegado":{"description":"Acceso denegado","value":{"error":"ORDER_ACCESS_DENIED","message":"No tienes permiso para acceder a esta orden"}}}}}},"404":{"description":"Orden no encontrada","content":{"application/json":{"examples":{"Orden no encontrada":{"description":"Orden no encontrada","value":{"error":"ORDER_NOT_FOUND","message":"Orden con id 123 no encontrada"}}}}}}},"security":[{"bearerAuth":[]}]},"put":{"tags":["Orders"],"summary":"Actualizar una orden existente","description":"Actualiza completamente una orden existente. Solo se puede actualizar si está en estado PENDIENTE o en los primeros 5 minutos de estar EN_PREPARACION.","operationId":"updateOrder","parameters":[{"name":"orderId","in":"path","description":"ID de la orden","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderRequest"}}},"required":true},"responses":{"200":{"description":"Orden actualizada correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderDetailResponse"}}}},"400":{"description":"Datos de entrada inválidos o la orden no puede ser modificada","content":{"application/json":{"examples":{"Orden no modificable":{"description":"Orden no modificable","value":{"error":"ORDER_CANNOT_BE_MODIFIED","message":"No se puede modificar la orden después de 5 minutos de estar en preparación"}}}}}},"403":{"description":"Sin permisos para modificar esta orden","content":{"application/json":{"examples":{"Acceso denegado":{"description":"Acceso denegado","value":{"error":"ORDER_ACCESS_DENIED","message":"No tienes permiso para acceder a esta orden"}}}}}},"404":{"description":"Orden no encontrada","content":{"application/json":{"examples":{"Orden no encontrada":{"description":"Orden no encontrada","value":{"error":"ORDER_NOT_FOUND","message":"Orden con id 123 no encontrada"}}}}}}},"security":[{"bearerAuth":[]}]}},"/api/categories/{id}":{"get":{"tags":["Categorías"],"summary":"Obtener categoría por ID","description":"Obtiene una categoría específica con la lista de nombres de sus productos","operationId":"getCategoryById","parameters":[{"name":"id","in":"path","description":"ID de la categoría","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Categoría encontrada exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryResponse"},"examples":{"Categoría con productos":{"description":"Categoría con productos","value":{"id":1,"name":"Bebidas","productNames":["Coca Cola","Pepsi","Agua"]}}}}}},"404":{"description":"Categoría no encontrada","content":{"application/json":{"examples":{"Categoría no encontrada":{"description":"Categoría no encontrada","value":{"error":"CATEGORY_NOT_FOUND","message":"Categoría con ID 999 no encontrada"}}}}}}}},"put":{"tags":["Categorías"],"summary":"Actualizar categoría","description":"Actualiza una categoría existente. Requiere rol de ADMIN o EMPLOYEE.","operationId":"updateCategory","parameters":[{"name":"id","in":"path","description":"ID de la categoría a actualizar","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Categoría actualizada exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategorySimpleResponse"},"examples":{"Categoría actualizada":{"description":"Categoría actualizada","value":{"id":1,"name":"Bebidas Refrescantes"}}}}}},"403":{"description":"Acceso denegado - Se requiere rol ADMIN o EMPLOYEE","content":{"application/json":{"examples":{"Acceso denegado":{"description":"Acceso denegado","value":{"error":"ACCESS_DENIED","message":"Se requiere rol ADMIN o EMPLOYEE para actualizar categorías"}}}}}},"404":{"description":"Categoría no encontrada","content":{"application/json":{"examples":{"Categoría no encontrada":{"description":"Categoría no encontrada","value":{"error":"CATEGORY_NOT_FOUND","message":"Categoría con ID 999 no encontrada"}}}}}},"409":{"description":"Nombre de categoría ya existe","content":{"application/json":{"examples":{"Nombre duplicado":{"description":"Nombre duplicado","value":{"error":"CATEGORY_ALREADY_EXISTS","message":"Ya existe una categoría con el nombre: Comidas"}}}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Categorías"],"summary":"Eliminar categoría","description":"Elimina una categoría. Solo se puede eliminar si no tiene productos asociados. Requiere rol de ADMIN o EMPLOYEE.","operationId":"deleteCategory","parameters":[{"name":"id","in":"path","description":"ID de la categoría a eliminar","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"204":{"description":"Categoría eliminada exitosamente"},"403":{"description":"Acceso denegado - Se requiere rol ADMIN o EMPLOYEE","content":{"application/json":{"examples":{"Acceso denegado":{"description":"Acceso denegado","value":{"error":"ACCESS_DENIED","message":"Se requiere rol ADMIN o EMPLOYEE para eliminar categorías"}}}}}},"404":{"description":"Categoría no encontrada","content":{"application/json":{"examples":{"Categoría no encontrada":{"description":"Categoría no encontrada","value":{"error":"CATEGORY_NOT_FOUND","message":"Categoría con ID 999 no encontrada"}}}}}},"409":{"description":"Categoría tiene productos asociados","content":{"application/json":{"examples":{"Categoría con productos":{"description":"Categoría con productos","value":{"error":"CATEGORY_HAS_PRODUCTS","message":"No se puede eliminar la categoría 'Bebidas' porque tiene 5 producto(s) asociado(s)"}}}}}}},"security":[{"bearerAuth":[]}]}},"/api/promotions":{"get":{"tags":["Promotions"],"summary":"Obtener todas las promociones con paginación","description":"Retorna una página de promociones ordenadas por fecha de creación descendente","operationId":"getPromotions","parameters":[{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"Página de promociones obtenida correctamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PagePromotionSummaryResponse"}}}}}},"post":{"tags":["Promotions"],"summary":"Crear una nueva promoción","description":"Crea una nueva promoción temporal o recurrente. Las promociones temporales pueden tener fechas de inicio y fin, mientras que las recurrentes requieren reglas semanales.","operationId":"createPromotion","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePromotionRequest"}}},"required":true},"responses":{"201":{"description":"Promoción creada correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromotionDetailResponse"}}}},"400":{"description":"Datos de entrada inválidos","content":{"application/json":{"examples":{"Validación fallida":{"description":"Validación fallida","value":{"error":"VALIDATION_FAILED","message":"Las promociones recurrentes deben tener al menos una regla semanal"}}}}}},"404":{"description":"Producto no encontrado","content":{"application/json":{"examples":{"Producto no encontrado":{"description":"Producto no encontrado","value":{"error":"PRODUCTS_NOT_FOUND","message":"Productos no encontrados: [999]"}}}}}}},"security":[{"bearerAuth":[]}]}},"/api/products":{"post":{"tags":["Products"],"summary":"Crear un nuevo producto. Requiere rol de ADMIN o EMPLOYEE.","description":"Crea un nuevo producto en el sistema","operationId":"createProduct","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/ProductCreateFormData"}}}},"responses":{"201":{"description":"Producto creado correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"400":{"description":"Datos de entrada inválidos","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"409":{"description":"Ya existe un producto con ese nombre","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders":{"post":{"tags":["Orders"],"summary":"Crear una nueva orden","description":"Crea una nueva orden para el usuario autenticado. La orden se crea en estado PENDIENTE.","operationId":"createOrder","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderRequest"}}},"required":true},"responses":{"201":{"description":"Orden creada correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderDetailResponse"}}}},"400":{"description":"Datos de entrada inválidos","content":{"application/json":{"examples":{"Orden vacía":{"description":"Orden vacía","value":{"error":"EMPTY_ORDER","message":"La orden debe contener al menos un item"}},"Configuración inválida de item":{"description":"Configuración inválida de item","value":{"error":"INVALID_ORDER_ITEM_CONFIGURATION","message":"El campo productId es obligatorio cuando el tipo es PRODUCT"}}}}}},"404":{"description":"Producto o promoción no encontrado","content":{"application/json":{"examples":{"Producto no disponible":{"description":"Producto no disponible","value":{"error":"PRODUCT_NOT_AVAILABLE","message":"El producto con id 123 no está disponible"}},"Promoción no disponible":{"description":"Promoción no disponible","value":{"error":"PROMOTION_NOT_AVAILABLE","message":"La promoción con id 456 no está disponible"}}}}}},"409":{"description":"Conflicto con reglas de negocio","content":{"application/json":{"examples":{"Límite de órdenes activas":{"description":"Límite de órdenes activas","value":{"error":"ORDER_LIMIT_EXCEEDED","message":"No puedes tener más de 3 órdenes activas al mismo tiempo"}}}}}}},"security":[{"bearerAuth":[]}]}},"/api/categories":{"get":{"tags":["Categorías"],"summary":"Obtener todas las categorías","description":"Obtiene una lista de todas las categorías ordenadas por nombre","operationId":"getAllCategories","responses":{"200":{"description":"Lista de categorías obtenida exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategorySimpleResponse"},"examples":{"Lista de categorías":{"description":"Lista de categorías","value":[{"id":1,"name":"Bebidas"},{"id":2,"name":"Comida Rápida"}]}}}}},"500":{"description":"Error interno del servidor","content":{"application/json":{"examples":{"Error interno":{"description":"Error interno","value":{"error":"INTERNAL_ERROR","message":"Error interno del servidor"}}}}}}}},"post":{"tags":["Categorías"],"summary":"Crear nueva categoría","description":"Crea una nueva categoría de productos. Requiere rol de ADMIN o EMPLOYEE.","operationId":"createCategory","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryCreateRequest"}}},"required":true},"responses":{"201":{"description":"Categoría creada exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategorySimpleResponse"},"examples":{"Categoría creada":{"description":"Categoría creada","value":{"id":5,"name":"Postres"}}}}}},"400":{"description":"Datos de entrada inválidos","content":{"application/json":{"examples":{"Datos inválidos":{"description":"Datos inválidos","value":{"error":"VALIDATION_ERROR","message":"El nombre de la categoría es obligatorio"}}}}}},"403":{"description":"Acceso denegado - Se requiere rol ADMIN o EMPLOYEE","content":{"application/json":{"examples":{"Acceso denegado":{"description":"Acceso denegado","value":{"error":"ACCESS_DENIED","message":"Se requiere rol ADMIN o EMPLOYEE para crear categorías"}}}}}},"409":{"description":"Categoría ya existe","content":{"application/json":{"examples":{"Categoría duplicada":{"description":"Categoría duplicada","value":{"error":"CATEGORY_ALREADY_EXISTS","message":"Ya existe una categoría con el nombre: Bebidas"}}}}}}},"security":[{"bearerAuth":[]}]}},"/api/auth/register":{"post":{"tags":["Autenticación"],"summary":"Registrar un nuevo usuario","description":"Crea un nuevo usuario con las credenciales proporcionadas.\nDevuelve un token de acceso JWT si el registro es exitoso.\nSi el usuario o email ya existen, o si la validación de datos falla, devuelve un error detallado.\n","operationId":"register","requestBody":{"description":"Datos de registro del usuario","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"},"examples":{"Ejemplo de registro":{"description":"Ejemplo de registro","value":{"username":"daniel","email":"daniel@example.com","password":"Abc123$%","roles":["ROLE_USER"]}}}}},"required":true},"responses":{"200":{"description":"Usuario registrado correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponse"},"examples":{"Registro exitoso":{"description":"Registro exitoso","value":{"accessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","refreshToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","tokenType":"Bearer","expiresIn":3600000}}}}}},"409":{"description":"El usuario o email ya existen","content":{"application/json":{"examples":{"Usuario duplicado":{"description":"Usuario duplicado","value":{"timestamp":"2025-10-05T19:15:41.740694500","error":"El usuario o email ya existe"}}}}}},"400":{"description":"Datos inválidos o fallos de validación","content":{"application/json":{"examples":{"Error de validación":{"description":"Error de validación","value":{"error":"Datos de entrada inválidos","validationErrors":{"username":"El nombre de usuario debe tener entre 3 y 20 caracteres"},"timestamp":"2025-10-05T19:17:53.673924500"}}}}}}}}},"/api/auth/refresh":{"post":{"tags":["Autenticación"],"summary":"Refrescar token JWT","description":"Genera un nuevo token de acceso usando el token de refresco válido.","operationId":"refresh","requestBody":{"description":"Token de refresco","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshRequest"},"examples":{"Ejemplo de refresh":{"description":"Ejemplo de refresh","value":{"refreshToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}}}}},"required":true},"responses":{"200":{"description":"Token refrescado correctamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"401":{"description":"Token de refresco inválido o expirado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}}}}},"/api/auth/logout":{"post":{"tags":["Autenticación"],"summary":"Cerrar sesión","description":"Invalida el token JWT actual agregándolo a una lista negra.\n\n**Autenticación requerida:** Este endpoint requiere un token JWT válido en el header Authorization.\n\n**Formato del header:**\n```\nAuthorization: Bearer <token-jwt>\n```\n","operationId":"logout","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Sesión cerrada correctamente","content":{"application/json":{"examples":{"Logout exitoso":{"description":"Logout exitoso","value":{"message":"Sesión cerrada correctamente","timestamp":"2025-10-09T15:30:45.123"}}}}}},"401":{"description":"Token JWT inválido, expirado o no proporcionado","content":{"application/json":{"examples":{"Sin autorización":{"description":"Sin autorización","value":{"error":"Unauthorized","message":"Token JWT requerido o inválido","timestamp":"2025-10-18T15:30:45.123"}}}}}}},"security":[{"bearerAuth":[]}]}},"/api/auth/login":{"post":{"tags":["Autenticación"],"summary":"Iniciar sesión","description":"Autentica al usuario con sus credenciales y devuelve un token de acceso y uno de refresco.","operationId":"login","requestBody":{"description":"Credenciales del usuario","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthRequest"},"examples":{"Ejemplo de login":{"description":"Ejemplo de login","value":{"username":"daniel","password":"123456"}}}}},"required":true},"responses":{"200":{"description":"Inicio de sesión exitoso","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"401":{"description":"Credenciales inválidas","content":{"application/json":{"examples":{"Error de autenticación":{"description":"Error de autenticación","value":{"error":"Credenciales inválidas"}}}}}}}}},"/api/promotions/{id}/status":{"patch":{"tags":["Promotions"],"summary":"Cambiar estado de la promoción","description":"Activa o desactiva una promoción","operationId":"togglePromotionStatus","parameters":[{"name":"id","in":"path","description":"ID de la promoción","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Estado cambiado correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromotionDetailResponse"}}}},"400":{"description":"No se puede activar promoción expirada","content":{"application/json":{"examples":{"Promoción expirada":{"description":"Promoción expirada","value":{"error":"PROMOTION_EXPIRED","message":"La promoción con id 123 ya expiró. Actualiza las fechas para reactivarla."}}}}}},"404":{"description":"Promoción no encontrada","content":{"application/json":{"examples":{"Promoción no encontrada":{"description":"Promoción no encontrada","value":{"error":"PROMOTION_NOT_FOUND","message":"Promoción con id 123 no encontrada."}}}}}}},"security":[{"bearerAuth":[]}]}},"/api/promotions/{id}/image":{"patch":{"tags":["Promotions"],"summary":"Subir imagen de promoción","description":"Sube o actualiza la imagen de una promoción existente","operationId":"uploadPromotionImage","parameters":[{"name":"id","in":"path","description":"ID de la promoción","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/PromotionImageRequest"}}}},"responses":{"200":{"description":"Imagen subida correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromotionDetailResponse"}}}},"400":{"description":"Imagen inválida / Datos de entrada incorrectos","content":{"application/json":{"examples":{"Imagen inválida":{"description":"Imagen inválida","value":{"error":"INVALID_IMAGE","message":"La imagen no cumple con los requisitos: tamaño máximo 5MB y tipos permitidos (jpg,png,webp)"}}}}}},"404":{"description":"Promoción no encontrada","content":{"application/json":{"examples":{"Promoción no encontrada":{"description":"Promoción no encontrada","value":{"error":"PROMOTION_NOT_FOUND","message":"Promoción con id 123 no encontrada"}}}}}}},"security":[{"bearerAuth":[]}]}},"/api/products/{id}/status":{"patch":{"tags":["Products"],"summary":"Cambiar estado del producto","description":"Activa o desactiva un producto","operationId":"toggleProductStatus","parameters":[{"name":"id","in":"path","description":"ID del producto","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"active","in":"query","description":"Nuevo estado del producto","required":true,"schema":{"type":"boolean"},"example":true}],"responses":{"200":{"description":"Estado del producto cambiado correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"404":{"description":"Producto no encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}}}}},"/api/products/{id}/image":{"patch":{"tags":["Products"],"summary":"Actualizar imagen del producto","description":"Actualiza la imagen de un producto existente","operationId":"updateProductImage","parameters":[{"name":"id","in":"path","description":"ID del producto","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/ProductImageUpdateRequest"}}}},"responses":{"200":{"description":"Imagen actualizada correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductImageUpdateResponse"}}}},"400":{"description":"Imagen inválida","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProductImageUpdateResponse"}}}},"404":{"description":"Producto no encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProductImageUpdateResponse"}}}}}}},"/api/orders/{orderId}/tip":{"patch":{"tags":["Orders"],"summary":"Actualizar la propina de una orden","description":"Permite al usuario actualizar completamente una orden existente (productos, cantidades, propina). Solo se puede actualizar si está en estado PENDIENTE o en los primeros minutos de EN_PREPARACION. **Al actualizar, se envía una notificación WebSocket a todos los empleados.**","operationId":"updateOrderTip","parameters":[{"name":"orderId","in":"path","description":"ID de la orden","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOrderTipRequest"}}},"required":true},"responses":{"200":{"description":"Propina actualizada correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderDetailResponse"}}}},"400":{"description":"La orden no puede ser modificada","content":{"application/json":{"examples":{"Orden no modificable":{"description":"Orden no modificable","value":{"error":"ORDER_CANNOT_BE_MODIFIED","message":"No se puede modificar la orden después de 5 minutos de estar en preparación"}}}}}},"403":{"description":"Sin permisos para modificar esta orden","content":{"application/json":{"examples":{"Acceso denegado":{"description":"Acceso denegado","value":{"error":"ORDER_ACCESS_DENIED","message":"No tienes permiso para acceder a esta orden"}}}}}},"404":{"description":"Orden no encontrada","content":{"application/json":{"examples":{"Orden no encontrada":{"description":"Orden no encontrada","value":{"error":"ORDER_NOT_FOUND","message":"Orden con id 123 no encontrada"}}}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/{orderId}/status":{"patch":{"tags":["Orders"],"summary":"Actualizar el estado de una orden","description":"Permite a empleados y administradores cambiar el estado de una orden. Las transiciones válidas son: PENDIENTE → EN_PREPARACION/CANCELADO, EN_PREPARACION → LISTO/CANCELADO, LISTO → ENTREGADO. **Al cambiar el estado, se envía una notificación WebSocket al usuario dueño de la orden.**","operationId":"updateOrderStatus","parameters":[{"name":"orderId","in":"path","description":"ID de la orden","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOrderStatusRequest"}}},"required":true},"responses":{"200":{"description":"Estado actualizado correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderDetailResponse"}}}},"400":{"description":"Transición de estado inválida","content":{"application/json":{"examples":{"Transición inválida":{"description":"Transición inválida","value":{"error":"INVALID_ORDER_STATUS_TRANSITION","message":"Una orden PENDIENTE solo puede pasar a EN_PREPARACION o CANCELADO"}}}}}},"404":{"description":"Orden no encontrada","content":{"application/json":{"examples":{"Orden no encontrada":{"description":"Orden no encontrada","value":{"error":"ORDER_NOT_FOUND","message":"Orden con id 123 no encontrada"}}}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/{orderId}/estimated-time":{"patch":{"tags":["Orders"],"summary":"Actualizar el tiempo estimado de una orden","description":"Permite a empleados y administradores actualizar el tiempo estimado de preparación de una orden. El formato debe ser HH:MM (por ejemplo, '00:30' para 30 minutos). **Al actualizar el tiempo, se envía una notificación WebSocket al usuario dueño de la orden.**","operationId":"updateOrderEstimatedTime","parameters":[{"name":"orderId","in":"path","description":"ID de la orden","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOrderEstimatedTimeRequest"}}},"required":true},"responses":{"200":{"description":"Tiempo estimado actualizado correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderDetailResponse"}}}},"400":{"description":"Formato de tiempo inválido","content":{"application/json":{"examples":{"Formato inválido":{"description":"Formato inválido","value":{"error":"INVALID_ESTIMATED_TIME","message":"El tiempo estimado debe tener el formato MM:SS"}}}}}},"404":{"description":"Orden no encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderDetailResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/{orderId}/cancel":{"patch":{"tags":["Orders"],"summary":"Cancelar una orden","description":"Cancela una orden del usuario autenticado. Solo se puede cancelar si está en estado PENDIENTE o EN_PREPARACION.","operationId":"cancelOrder","parameters":[{"name":"orderId","in":"path","description":"ID de la orden","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Orden cancelada correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderCancelledResponse"}}}},"400":{"description":"La orden no puede ser cancelada","content":{"application/json":{"examples":{"Orden ya cancelada":{"description":"Orden ya cancelada","value":{"error":"ORDER_ALREADY_CANCELLED","message":"La orden con id 123 ya está cancelada"}},"Orden ya entregada":{"description":"Orden ya entregada","value":{"error":"ORDER_ALREADY_DELIVERED","message":"No se puede cancelar una orden que ya fue entregada"}}}}}},"403":{"description":"Sin permisos para cancelar esta orden","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderCancelledResponse"}}}},"404":{"description":"Orden no encontrada","content":{"application/json":{"examples":{"Orden no encontrada":{"description":"Orden no encontrada","value":{"error":"ORDER_NOT_FOUND","message":"Orden con id 123 no encontrada"}}}}}}},"security":[{"bearerAuth":[]}]}},"/docs":{"get":{"tags":["scalar-controller"],"operationId":"getDocs","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/docs/scalar.js":{"get":{"tags":["scalar-controller"],"operationId":"getScalarJs","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string","format":"byte"}}}}}}},"/api/websocket/notification-example":{"get":{"tags":["WebSocket Documentation"],"summary":"Ejemplo de estructura de notificación WebSocket","description":"Este endpoint muestra la estructura exacta del JSON que recibirás por WebSocket.\n\n**Nota:** Este es solo un endpoint de ejemplo para documentación.\nLas notificaciones reales se envían automáticamente por WebSocket cuando ocurren eventos en las órdenes.\n\n## Tipos de notificación:\n- **ORDER_CREATED**: Cuando un usuario crea una orden\n- **ORDER_UPDATED**: Cuando un usuario modifica su orden\n- **ORDER_STATUS_CHANGED**: Cuando un empleado cambia el estado de una orden\n- **ORDER_ESTIMATED_TIME_CHANGED**: Cuando un empleado actualiza el tiempo estimado\n- **ORDER_CANCELLED**: Cuando una orden es cancelada\n","operationId":"getNotificationExample","responses":{"200":{"description":"Ejemplo de notificación WebSocket","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderNotificationDto"},"examples":{"Notificación para Empleados (Orden Creada)":{"description":"Notificación para Empleados (Orden Creada)","value":{"orderId":1,"userId":48,"userName":"Juan Pérez","status":"PENDIENTE","total":250.5,"estimatedTime":null,"createdAt":"2024-10-30T14:30:00","updatedAt":"2024-10-30T14:30:00","notificationType":"ORDER_CREATED","message":"¡Nueva orden! El usuario Juan Pérez creó la orden #1"}},"Notificación para Usuario (Estado Cambiado)":{"description":"Notificación para Usuario (Estado Cambiado)","value":{"orderId":1,"userId":48,"userName":"Juan Pérez","status":"EN_PREPARACION","total":250.5,"estimatedTime":"00:30","createdAt":"2024-10-30T14:30:00","updatedAt":"2024-10-30T14:35:00","notificationType":"ORDER_STATUS_CHANGED","message":"Tu orden #1 cambió a estado: EN_PREPARACION"}},"Notificación para Usuario (Tiempo Estimado)":{"description":"Notificación para Usuario (Tiempo Estimado)","value":{"orderId":1,"userId":48,"userName":"Juan Pérez","status":"EN_PREPARACION","total":250.5,"estimatedTime":"00:45","createdAt":"2024-10-30T14:30:00","updatedAt":"2024-10-30T14:40:00","notificationType":"ORDER_ESTIMATED_TIME_CHANGED","message":"El tiempo estimado de tu orden #1 cambió a: 00:45"}}}}}}}}},"/api/websocket/info":{"get":{"tags":["WebSocket Documentation"],"summary":"Información de conexión WebSocket","description":"# Conexión WebSocket para Notificaciones en Tiempo Real\n\n## Endpoint de Conexión:\n**URL:** `ws://localhost:8081/ws` (o `wss://` en producción con HTTPS)\n\n## Protocolo:\nSe utiliza **STOMP** sobre WebSocket con **SockJS** como fallback.\n\n## Canales de Suscripción:\n\n### 1. Canal para Empleados (reciben notificaciones de cambios hechos por usuarios):\n- **Topic:** `/topic/orders/employees`\n- **Quién se suscribe:** Empleados y administradores\n- **Notificaciones que reciben:**\n  - Órdenes creadas por usuarios\n  - Órdenes modificadas por usuarios (cambios en productos/cantidades)\n\n### 2. Canal para Usuarios (reciben notificaciones de cambios hechos por empleados):\n- **Topic:** `/topic/orders/user/{userId}`\n- **Quién se suscribe:** Cada usuario se suscribe a su propio canal (reemplazar {userId} con su ID)\n- **Notificaciones que reciben:**\n  - Cambios de estado en sus órdenes\n  - Cambios en tiempo estimado de preparación\n\n---\n\n## Implementación en Ionic/Angular\n\n### 1. Instalar dependencias:\n```bash\nnpm install sockjs-client @stomp/stompjs rxjs\n```\n\n### 2. Crear el servicio WebSocket (websocket.service.ts):\n\n```typescript\nimport { Injectable } from '@angular/core';\nimport { Client, StompSubscription } from '@stomp/stompjs';\nimport * as SockJS from 'sockjs-client';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\nexport interface OrderNotification {\n  orderId: number;\n  userId: number;\n  userName: string;\n  status: string;\n  total: number;\n  estimatedTime: string;\n  createdAt: string;\n  updatedAt: string;\n  notificationType: 'ORDER_CREATED' | 'ORDER_UPDATED' | 'ORDER_STATUS_CHANGED' |\n                   'ORDER_ESTIMATED_TIME_CHANGED' | 'ORDER_CANCELLED';\n  message: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WebSocketService {\n  private client: Client;\n  private connected = new BehaviorSubject<boolean>(false);\n  private employeeNotifications = new BehaviorSubject<OrderNotification | null>(null);\n  private userNotifications = new BehaviorSubject<OrderNotification | null>(null);\n  private subscriptions: StompSubscription[] = [];\n\n  constructor() {\n    this.client = new Client();\n  }\n\n  connect(serverUrl: string = 'http://localhost:8081/ws'): void {\n    this.client.webSocketFactory = () => new SockJS(serverUrl);\n\n    this.client.onConnect = (frame) => {\n      console.log('Conectado a WebSocket:', frame);\n      this.connected.next(true);\n    };\n\n    this.client.onStompError = (frame) => {\n      console.error('Error en WebSocket:', frame);\n      this.connected.next(false);\n    };\n\n    this.client.onWebSocketClose = () => {\n      console.log('WebSocket desconectado');\n      this.connected.next(false);\n    };\n\n    this.client.reconnectDelay = 5000;\n    this.client.activate();\n  }\n\n  disconnect(): void {\n    this.subscriptions.forEach(sub => sub.unsubscribe());\n    this.subscriptions = [];\n    this.client.deactivate();\n    this.connected.next(false);\n  }\n\n  subscribeToEmployeeNotifications(): Observable<OrderNotification | null> {\n    if (this.client.connected) {\n      const subscription = this.client.subscribe('/topic/orders/employees', (message) => {\n        const notification: OrderNotification = JSON.parse(message.body);\n        console.log('Notificación para empleados:', notification);\n        this.employeeNotifications.next(notification);\n      });\n      this.subscriptions.push(subscription);\n    }\n    return this.employeeNotifications.asObservable();\n  }\n\n  subscribeToUserNotifications(userId: number): Observable<OrderNotification | null> {\n    if (this.client.connected) {\n      const topic = '/topic/orders/user/' + userId;\n      const subscription = this.client.subscribe(topic, (message) => {\n        const notification: OrderNotification = JSON.parse(message.body);\n        console.log('Notificación para usuario:', notification);\n        this.userNotifications.next(notification);\n      });\n      this.subscriptions.push(subscription);\n    }\n    return this.userNotifications.asObservable();\n  }\n\n  isConnected(): Observable<boolean> {\n    return this.connected.asObservable();\n  }\n}\n```\n\n### 3. Usar en componente de usuario:\n\nVer endpoint /api/websocket/notification-example para ver la estructura completa de las notificaciones.\n\n## Notas Importantes:\n- Conecta solo cuando el usuario entre a la pantalla relevante\n- Desconecta al salir del componente\n- En producción usa wss:// con HTTPS\n- Las notificaciones se reciben en tiempo real\n","operationId":"getWebSocketInfo","responses":{"200":{"description":"Información de configuración WebSocket","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebSocketInfo"}}}}}}},"/api/promotions/type/{type}":{"get":{"tags":["Promotions"],"summary":"Obtener promociones por tipo","description":"Retorna promociones filtradas por tipo (TEMPORARY o RECURRING)","operationId":"getPromotionsByType","parameters":[{"name":"type","in":"path","description":"Tipo de promoción","required":true,"schema":{"type":"string","enum":["TEMPORARY","RECURRING"]},"example":"TEMPORARY"}],"responses":{"200":{"description":"Promociones por tipo obtenidas correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromotionSummaryResponse"}}}}}}},"/api/promotions/start-date/{date}":{"get":{"tags":["Promotions"],"summary":"Obtener promociones por fecha de inicio","description":"Retorna promociones que inicien en una fecha específica","operationId":"getPromotionsByStartDate","parameters":[{"name":"date","in":"path","description":"Fecha de inicio","required":true,"schema":{"type":"string","format":"date"},"example":"2024-10-20"}],"responses":{"200":{"description":"Promociones por fecha de inicio obtenidas correctamente","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PromotionSummaryResponse"}}}}}}}},"/api/promotions/search":{"get":{"tags":["Promotions"],"summary":"Buscar promociones por nombre","description":"Busca promociones activas que contengan el texto especificado en su nombre","operationId":"searchPromotionsByName","parameters":[{"name":"name","in":"query","description":"Texto a buscar en el nombre de la promoción","required":true,"schema":{"type":"string"},"example":"2x1"}],"responses":{"200":{"description":"Búsqueda realizada correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromotionSummaryResponse"}}}}}}},"/api/promotions/products":{"get":{"tags":["Promotions"],"summary":"Obtener promociones activas por múltiples productos","description":"Retorna promociones activas que incluyan cualquiera de los productos especificados","operationId":"getActivePromotionsByProducts","parameters":[{"name":"productIds","in":"query","description":"IDs de productos separados por coma","required":true,"schema":{"type":"array","items":{"type":"integer","format":"int64"}},"example":"1,2,3"}],"responses":{"200":{"description":"Promociones por productos obtenidas correctamente","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PromotionSummaryResponse"}}}}}}}},"/api/promotions/product/{productId}":{"get":{"tags":["Promotions"],"summary":"Obtener promociones activas por producto","description":"Retorna promociones activas que incluyan un producto específico","operationId":"getActivePromotionsByProduct","parameters":[{"name":"productId","in":"path","description":"ID del producto","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Promociones por producto obtenidas correctamente","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PromotionSummaryResponse"}}}}}}}},"/api/promotions/expiring-soon":{"get":{"tags":["Promotions"],"summary":"Obtener promociones que expiran pronto","description":"Retorna promociones que expiran dentro de un rango de fechas","operationId":"getPromotionsExpiringSoon","parameters":[{"name":"startDate","in":"query","description":"Fecha de inicio del rango","required":true,"schema":{"type":"string","format":"date"},"example":"2024-10-20"},{"name":"endDate","in":"query","description":"Fecha de fin del rango","required":true,"schema":{"type":"string","format":"date"},"example":"2024-10-25"}],"responses":{"200":{"description":"Promociones que expiran pronto obtenidas correctamente","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PromotionSummaryResponse"}}}}}}}},"/api/promotions/expired":{"get":{"tags":["Promotions"],"summary":"Obtener promociones expiradas","description":"Retorna promociones temporales que ya han expirado","operationId":"getExpiredPromotions","responses":{"200":{"description":"Promociones expiradas obtenidas correctamente","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PromotionSummaryResponse"}}}}}}}},"/api/promotions/end-date/{date}":{"get":{"tags":["Promotions"],"summary":"Obtener promociones por fecha de fin","description":"Retorna promociones que terminen en una fecha específica","operationId":"getPromotionsByEndDate","parameters":[{"name":"date","in":"path","description":"Fecha de fin","required":true,"schema":{"type":"string","format":"date"},"example":"2024-10-25"}],"responses":{"200":{"description":"Promociones por fecha de fin obtenidas correctamente","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PromotionSummaryResponse"}}}}}}}},"/api/promotions/date-range":{"get":{"tags":["Promotions"],"summary":"Obtener promociones temporales por rango de fechas","description":"Retorna promociones temporales que se encuentren dentro del rango de fechas especificado","operationId":"getTemporaryPromotionsByDateRange","parameters":[{"name":"startDate","in":"query","description":"Fecha de inicio del rango","required":true,"schema":{"type":"string","format":"date"},"example":"2024-10-01"},{"name":"endDate","in":"query","description":"Fecha de fin del rango","required":true,"schema":{"type":"string","format":"date"},"example":"2024-10-31"}],"responses":{"200":{"description":"Promociones temporales por rango obtenidas correctamente","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PromotionSummaryResponse"}}}}}}}},"/api/promotions/current":{"get":{"tags":["Promotions"],"summary":"Obtener promociones válidas actualmente","description":"Retorna promociones que están válidas en la fecha y hora actual","operationId":"getCurrentlyValidPromotions","responses":{"200":{"description":"Promociones válidas obtenidas correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromotionSummaryResponse"}}}}}}},"/api/promotions/count/type/{type}":{"get":{"tags":["Promotions"],"summary":"Contar promociones por tipo","description":"Retorna el número total de promociones de un tipo específico","operationId":"getPromotionsCountByType","parameters":[{"name":"type","in":"path","description":"Tipo de promoción","required":true,"schema":{"type":"string","enum":["TEMPORARY","RECURRING"]},"example":"TEMPORARY"}],"responses":{"200":{"description":"Conteo realizado correctamente","content":{"application/json":{"examples":{"Conteo de promociones":{"description":"Conteo de promociones","value":15}}}}}}}},"/api/promotions/count/active/type/{type}":{"get":{"tags":["Promotions"],"summary":"Contar promociones activas por tipo","description":"Retorna el número de promociones activas de un tipo específico","operationId":"getActivePromotionsCountByType","parameters":[{"name":"type","in":"path","description":"Tipo de promoción","required":true,"schema":{"type":"string","enum":["TEMPORARY","RECURRING"]},"example":"RECURRING"}],"responses":{"200":{"description":"Conteo de promociones activas realizado correctamente","content":{"application/json":{"examples":{"Conteo de promociones activas":{"description":"Conteo de promociones activas","value":12}}}}}}}},"/api/promotions/active":{"get":{"tags":["Promotions"],"summary":"Obtener todas las promociones activas","description":"Retorna una lista de todas las promociones activas disponibles","operationId":"getActivePromotions","responses":{"200":{"description":"Lista de promociones activas obtenida correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromotionSummaryResponse"}}}}}}},"/api/promotions/active/price-desc":{"get":{"tags":["Promotions"],"summary":"Obtener promociones activas ordenadas por precio descendente","description":"Retorna promociones activas ordenadas de mayor a menor precio","operationId":"getActivePromotionsByPriceDesc","responses":{"200":{"description":"Promociones ordenadas por precio obtenidas correctamente","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PromotionSummaryResponse"}}}}}}}},"/api/promotions/active/price-asc":{"get":{"tags":["Promotions"],"summary":"Obtener promociones activas ordenadas por precio ascendente","description":"Retorna promociones activas ordenadas de menor a mayor precio","operationId":"getActivePromotionsByPriceAsc","responses":{"200":{"description":"Promociones ordenadas por precio obtenidas correctamente","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PromotionSummaryResponse"}}}}}}}},"/api/profile":{"get":{"tags":["Perfil de Usuario"],"summary":"Obtener perfil de usuario","description":"Obtiene la información del perfil del usuario autenticado.\n\n**Autenticación requerida:** Este endpoint requiere un token JWT válido en el header Authorization.\n\n**Formato del header:**\n```\nAuthorization: Bearer <token-jwt>\n```\n","operationId":"getUserProfile","responses":{"200":{"description":"Información del usuario obtenida correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfileResponse"},"examples":{"Éxito":{"description":"Éxito","value":{"id":1,"username":"daniel","email":"daniel@example.com","name":"Daniel Santiago","avatarUrl":"http://localhost:8081/public/avatars/daniel_12345.jpg","registerDate":"2023-03-15T12:34:56.789","roles":["USER"]}}}}}},"404":{"description":"Usuario no encontrado","content":{"application/json":{"examples":{"Usuario inexistente":{"description":"Usuario inexistente","value":{"error":"Usuario no encontrado","message":"Usuario no encontrado","timestamp":"2025-10-09T18:30:45.123"}}}}}},"401":{"description":"No autorizado","content":{"application/json":{"examples":{"Sin autenticación":{"description":"Sin autenticación","value":{"error":"Unauthorized","message":"Token JWT requerido","timestamp":"2025-10-09T18:30:45.123"}}}}}}},"security":[{"bearerAuth":[]}]}},"/api/products/{id}/active":{"get":{"tags":["Products"],"summary":"Obtener producto activo por ID","description":"Busca un producto activo específico por su identificador único","operationId":"getActiveProductById","parameters":[{"name":"id","in":"path","description":"ID del producto","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Producto activo encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"404":{"description":"Producto no encontrado o inactivo","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}}}}},"/api/products/search":{"get":{"tags":["Products"],"summary":"Buscar productos por nombre","description":"Busca productos que contengan el texto especificado en su nombre","operationId":"searchProducts","parameters":[{"name":"name","in":"query","description":"Texto a buscar en el nombre del producto","required":true,"schema":{"type":"string"},"example":"hamburguesa"}],"responses":{"200":{"description":"Búsqueda realizada correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductSearchResponse"}}}}}}},"/api/products/search/advanced":{"get":{"tags":["Products"],"summary":"Búsqueda avanzada de productos","description":"Busca productos aplicando múltiples filtros opcionales","operationId":"searchProductsWithFilters","parameters":[{"name":"name","in":"query","description":"Texto a buscar en el nombre (opcional)","required":false,"schema":{"type":"string"},"example":"hamburguesa"},{"name":"categoryId","in":"query","description":"ID de la categoría a filtrar (opcional)","required":false,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"active","in":"query","description":"Estado de activación a filtrar (opcional)","required":false,"schema":{"type":"boolean"},"example":true}],"responses":{"200":{"description":"Búsqueda avanzada realizada correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductSearchResponse"}}}}}}},"/api/products/search/active":{"get":{"tags":["Products"],"summary":"Buscar productos activos por nombre","description":"Busca productos activos que contengan el texto especificado en su nombre","operationId":"searchActiveProducts","parameters":[{"name":"name","in":"query","description":"Texto a buscar en el nombre del producto","required":true,"schema":{"type":"string"},"example":"hamburguesa"}],"responses":{"200":{"description":"Búsqueda de productos activos realizada correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductSearchResponse"}}}}}}},"/api/products/category/{categoryId}":{"get":{"tags":["Products"],"summary":"Obtener productos por categoría","description":"Retorna todos los productos de una categoría específica","operationId":"getProductsByCategory","parameters":[{"name":"categoryId","in":"path","description":"ID de la categoría","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Productos de la categoría obtenidos correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}}}}},"/api/products/category/{categoryId}/count":{"get":{"tags":["Products"],"summary":"Contar productos por categoría","description":"Retorna el número total de productos en una categoría","operationId":"countProductsByCategory","parameters":[{"name":"categoryId","in":"path","description":"ID de la categoría","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Conteo realizado correctamente","content":{"application/json":{"examples":{"Conteo de productos":{"description":"Conteo de productos","value":15}}}}}}}},"/api/products/category/{categoryId}/count/active":{"get":{"tags":["Products"],"summary":"Contar productos activos por categoría","description":"Retorna el número de productos activos en una categoría","operationId":"countActiveProductsByCategory","parameters":[{"name":"categoryId","in":"path","description":"ID de la categoría","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Conteo de productos activos realizado correctamente","content":{"application/json":{"examples":{"Conteo de productos activos":{"description":"Conteo de productos activos","value":12}}}}}}}},"/api/products/category/{categoryId}/active":{"get":{"tags":["Products"],"summary":"Obtener productos activos por categoría","description":"Retorna todos los productos activos de una categoría específica","operationId":"getActiveProductsByCategory","parameters":[{"name":"categoryId","in":"path","description":"ID de la categoría","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Productos activos de la categoría obtenidos correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}}}}},"/api/products/all":{"get":{"tags":["Products"],"summary":"Obtener todos los productos","description":"Retorna una lista de todos los productos (activos e inactivos)","operationId":"getAllProducts","responses":{"200":{"description":"Lista de productos obtenida correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}}}}},"/api/products/active":{"get":{"tags":["Products"],"summary":"Obtener todos los productos activos","description":"Retorna una lista de todos los productos activos disponibles","operationId":"getAllActiveProducts","responses":{"200":{"description":"Lista de productos obtenida correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}}}}},"/api/orders/user/{userId}/status/{status}":{"get":{"tags":["Orders"],"summary":"Obtener órdenes de un usuario por estado","description":"Obtiene órdenes de un usuario específico filtradas por estado. Solo empleados y administradores.","operationId":"getUserOrdersByStatus","parameters":[{"name":"userId","in":"path","description":"ID del usuario","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"status","in":"path","description":"Estado de la orden","required":true,"schema":{"type":"string","enum":["PENDIENTE","EN_PREPARACION","LISTO","ENTREGADO","CANCELADO"]},"example":"EN_PREPARACION"},{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"Órdenes obtenidas correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderSummaryResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/user/{userId}/date-range":{"get":{"tags":["Orders"],"summary":"Obtener órdenes de un usuario por rango de fechas","description":"Obtiene órdenes de un usuario específico dentro de un rango de fechas. Solo empleados y administradores.","operationId":"getUserOrdersByDateRange","parameters":[{"name":"userId","in":"path","description":"ID del usuario","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"startDate","in":"query","description":"Fecha de inicio","required":true,"schema":{"type":"string","format":"date-time"},"example":"2024-10-01T00:00:00"},{"name":"endDate","in":"query","description":"Fecha de fin","required":true,"schema":{"type":"string","format":"date-time"},"example":"2024-10-31T23:59:59"},{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"Órdenes obtenidas correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderSummaryResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/top-selling/promotions":{"get":{"tags":["Orders"],"summary":"Obtener promociones más vendidas","description":"Obtiene la lista de promociones más vendidas ordenadas por cantidad. Solo empleados y administradores.","operationId":"getTopSellingPromotions","responses":{"200":{"description":"Promociones más vendidas obtenidas correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TopSellingItemResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/top-selling/products":{"get":{"tags":["Orders"],"summary":"Obtener productos más vendidos","description":"Obtiene la lista de productos más vendidos ordenados por cantidad. Solo empleados y administradores.","operationId":"getTopSellingProducts","responses":{"200":{"description":"Productos más vendidos obtenidos correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TopSellingItemResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/status/{status}":{"get":{"tags":["Orders"],"summary":"Obtener órdenes por estado","description":"Obtiene todas las órdenes filtradas por estado con paginación. Solo empleados y administradores.","operationId":"getOrdersByStatus","parameters":[{"name":"status","in":"path","description":"Estado de la orden","required":true,"schema":{"type":"string","enum":["PENDIENTE","EN_PREPARACION","LISTO","ENTREGADO","CANCELADO"]},"example":"PENDIENTE"},{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"Órdenes obtenidas correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderSummaryResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/statistics":{"get":{"tags":["Orders"],"summary":"Obtener estadísticas generales de órdenes","description":"Obtiene estadísticas generales del sistema de órdenes. Solo empleados y administradores.","operationId":"getOrderStatistics","responses":{"200":{"description":"Estadísticas obtenidas correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderStatisticsResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/statistics/date-range":{"get":{"tags":["Orders"],"summary":"Obtener estadísticas de órdenes por rango de fechas","description":"Obtiene estadísticas de órdenes dentro de un rango de fechas específico. Solo empleados y administradores.","operationId":"getOrderStatisticsByDateRange","parameters":[{"name":"startDate","in":"query","description":"Fecha de inicio","required":true,"schema":{"type":"string","format":"date-time"},"example":"2024-10-01T00:00:00"},{"name":"endDate","in":"query","description":"Fecha de fin","required":true,"schema":{"type":"string","format":"date-time"},"example":"2024-10-31T23:59:59"}],"responses":{"200":{"description":"Estadísticas obtenidas correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderStatisticsResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/my-orders":{"get":{"tags":["Orders"],"summary":"Obtener órdenes del usuario autenticado","description":"Obtiene todas las órdenes del usuario autenticado con paginación.","operationId":"getMyOrders","parameters":[{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"Órdenes obtenidas correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderSummaryResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/my-orders/recent":{"get":{"tags":["Orders"],"summary":"Obtener órdenes del usuario ordenadas por fecha","description":"Obtiene todas las órdenes del usuario autenticado ordenadas por fecha de creación descendente.","operationId":"getMyOrdersOrderedByDate","responses":{"200":{"description":"Órdenes obtenidas correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderSummaryResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/my-orders/pending":{"get":{"tags":["Orders"],"summary":"Obtener órdenes pendientes del usuario","description":"Obtiene todas las órdenes pendientes del usuario autenticado.","operationId":"getMyPendingOrders","responses":{"200":{"description":"Órdenes pendientes obtenidas correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderSummaryResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/my-orders/last":{"get":{"tags":["Orders"],"summary":"Obtener la última orden del usuario","description":"Obtiene la orden más reciente del usuario autenticado.","operationId":"getMyLastOrder","responses":{"200":{"description":"Orden obtenida correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderDetailResponse"}}}},"404":{"description":"No se encontraron órdenes para este usuario","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderDetailResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/has-active-orders":{"get":{"tags":["Orders"],"summary":"Verificar si el usuario tiene órdenes activas","description":"Verifica si el usuario autenticado tiene órdenes activas (pendientes o en preparación).","operationId":"hasActiveOrders","responses":{"200":{"description":"Verificación realizada correctamente","content":{"application/json":{"examples":{"Tiene órdenes activas":{"description":"Tiene órdenes activas","value":true}}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/date-range":{"get":{"tags":["Orders"],"summary":"Obtener órdenes por rango de fechas","description":"Obtiene órdenes dentro de un rango de fechas específico. Solo empleados y administradores.","operationId":"getOrdersByDateRange","parameters":[{"name":"startDate","in":"query","description":"Fecha de inicio","required":true,"schema":{"type":"string","format":"date-time"},"example":"2024-10-01T00:00:00"},{"name":"endDate","in":"query","description":"Fecha de fin","required":true,"schema":{"type":"string","format":"date-time"},"example":"2024-10-31T23:59:59"},{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"Órdenes obtenidas correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderSummaryResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/orders/active":{"get":{"tags":["Orders"],"summary":"Obtener órdenes activas","description":"Obtiene todas las órdenes activas (no canceladas ni entregadas) con paginación. Solo empleados y administradores.","operationId":"getActiveOrders","parameters":[{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"Órdenes activas obtenidas correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderSummaryResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/categories/{id}/products/count":{"get":{"tags":["Categorías"],"summary":"Contar productos de una categoría","description":"Obtiene el número de productos asociados a una categoría","operationId":"countProductsByCategory_1","parameters":[{"name":"id","in":"path","description":"ID de la categoría","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Conteo obtenido exitosamente","content":{"application/json":{"examples":{"Conteo de productos":{"description":"Conteo de productos","value":5}}}}},"404":{"description":"Categoría no encontrada","content":{"application/json":{"examples":{"Categoría no encontrada":{"description":"Categoría no encontrada","value":{"error":"CATEGORY_NOT_FOUND","message":"Categoría con ID 999 no encontrada"}}}}}}}}},"/api/categories/{id}/detailed":{"get":{"tags":["Categorías"],"summary":"Obtener categoría con productos detallados","description":"Obtiene una categoría específica con información completa de todos sus productos","operationId":"getCategoryDetailed","parameters":[{"name":"id","in":"path","description":"ID de la categoría","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Categoría con productos detallados obtenida exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryDetailedResponse"},"examples":{"Categoría con productos detallados":{"description":"Categoría con productos detallados","value":{"id":1,"name":"Bebidas","products":[{"id":1,"name":"Coca Cola","description":null,"price":2.5,"imageUrl":"http://localhost:8081/public/images/coca-cola.jpg","active":true},{"id":2,"name":"Pepsi","description":null,"price":2.3,"imageUrl":"http://localhost:8081/public/images/pepsi.jpg","active":true}]}}}}}},"404":{"description":"Categoría no encontrada","content":{"application/json":{"examples":{"Categoría no encontrada":{"description":"Categoría no encontrada","value":{"error":"CATEGORY_NOT_FOUND","message":"Categoría con ID 999 no encontrada"}}}}}}}}},"/api/categories/without-products":{"get":{"tags":["Categorías"],"summary":"Obtener categorías vacías","description":"Obtiene las categorías que no tienen productos asociados","operationId":"getCategoriesWithoutProducts","responses":{"200":{"description":"Categorías vacías obtenidas exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategorySimpleResponse"}}}}}}},"/api/categories/with-products":{"get":{"tags":["Categorías"],"summary":"Obtener categorías con productos","description":"Obtiene solo las categorías que tienen al menos un producto asociado","operationId":"getCategoriesWithProducts","responses":{"200":{"description":"Categorías con productos obtenidas exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategorySimpleResponse"}}}}}}},"/api/categories/with-active-products":{"get":{"tags":["Categorías"],"summary":"Obtener categorías con productos activos","description":"Obtiene las categorías que tienen productos activos","operationId":"getCategoriesWithActiveProducts","responses":{"200":{"description":"Categorías con productos activos obtenidas exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategorySimpleResponse"}}}}}}},"/api/categories/search":{"get":{"tags":["Categorías"],"summary":"Buscar categorías por nombre","description":"Busca categorías que contengan el texto especificado en su nombre","operationId":"searchCategories","parameters":[{"name":"name","in":"query","description":"Texto a buscar en el nombre de las categorías","required":true,"schema":{"type":"string"},"example":"bebida"}],"responses":{"200":{"description":"Búsqueda realizada exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategorySimpleResponse"},"examples":{"Resultados de búsqueda":{"description":"Resultados de búsqueda","value":[{"id":1,"name":"Bebidas Frías"},{"id":3,"name":"Bebidas Calientes"}]}}}}},"400":{"description":"Parámetro de búsqueda requerido","content":{"application/json":{"examples":{"Parámetro faltante":{"description":"Parámetro faltante","value":{"error":"BAD_REQUEST","message":"El parámetro 'name' es requerido"}}}}}}}}},"/api/categories/name/{name}":{"get":{"tags":["Categorías"],"summary":"Buscar categoría por nombre exacto","description":"Busca una categoría por su nombre exacto","operationId":"getCategoryByName","parameters":[{"name":"name","in":"path","description":"Nombre exacto de la categoría","required":true,"schema":{"type":"string"},"example":"Bebidas"}],"responses":{"200":{"description":"Categoría encontrada","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategorySimpleResponse"}}}},"404":{"description":"Categoría no encontrada","content":{"application/json":{"examples":{"Categoría no encontrada":{"description":"Categoría no encontrada","value":{"error":"CATEGORY_NOT_FOUND","message":"Categoría con name 'Inexistente' no encontrada"}}}}}}}}},"/api/auth/verify-roles":{"get":{"tags":["Autenticación"],"summary":"Verificar roles del usuario","description":"Obtiene los roles del usuario autenticado basado en el token JWT.\n\n**Autenticación requerida:** Este endpoint requiere un token JWT válido en el header Authorization.\n\n**Formato del header:**\n```\nAuthorization: Bearer <token-jwt>\n```\n","operationId":"verifyRoles","responses":{"200":{"description":"Roles obtenidos correctamente","content":{"application/json":{"examples":{"Roles del usuario":{"description":"Roles del usuario","value":{"username":"daniel","roles":["ROLE_USER","ROLE_ADMIN"],"timestamp":"2025-10-09T15:30:45.123"}}}}}},"401":{"description":"Token JWT inválido, expirado o no proporcionado","content":{"application/json":{"examples":{"Sin autorización":{"description":"Sin autorización","value":{"error":"Unauthorized","message":"Token JWT requerido o inválido","timestamp":"2025-10-18T15:30:45.123"}}}}}}},"security":[{"bearerAuth":[]}]}}},"components":{"schemas":{"LocalTime":{"type":"object","properties":{"hour":{"type":"integer","format":"int32"},"minute":{"type":"integer","format":"int32"},"second":{"type":"integer","format":"int32"},"nano":{"type":"integer","format":"int32"}},"description":"Hora de fin","example":"18:00:00"},"ProductSummaryResponse":{"type":"object","properties":{"id":{"type":"integer","description":"ID único del producto","format":"int64","example":1},"name":{"type":"string","description":"Nombre del producto","example":"Taco de Pastor"},"imageUrl":{"type":"string","description":"URL de la imagen del producto"},"price":{"type":"number","description":"Precio individual del producto","example":25.0}},"description":"DTO con información básica de un producto"},"PromotionDetailResponse":{"type":"object","properties":{"id":{"type":"integer","description":"ID único de la promoción","format":"int64","example":1},"name":{"type":"string","description":"Nombre de la promoción","example":"2x1 en Tacos"},"description":{"type":"string","description":"Descripción detallada de la promoción"},"imageUrl":{"type":"string","description":"URL de la imagen de la promoción"},"price":{"type":"number","description":"Precio total de la promoción","example":99.99},"type":{"type":"string","description":"Tipo de promoción","enum":["TEMPORARY","RECURRING"]},"startsAt":{"type":"string","description":"Fecha de inicio (solo promociones temporales)","format":"date"},"endsAt":{"type":"string","description":"Fecha de fin (solo promociones temporales)","format":"date"},"active":{"type":"boolean","description":"Estado activo de la promoción"},"currentlyValid":{"type":"boolean","description":"Indica si la promoción está actualmente válida"},"products":{"uniqueItems":true,"type":"array","description":"Productos incluidos en la promoción","items":{"$ref":"#/components/schemas/ProductSummaryResponse"}},"weeklyRules":{"uniqueItems":true,"type":"array","description":"Reglas semanales (solo promociones recurrentes)","items":{"$ref":"#/components/schemas/WeeklyRuleResponse"}}},"description":"DTO con información completa de una promoción"},"WeeklyRuleResponse":{"type":"object","properties":{"id":{"type":"integer","description":"ID único de la regla","format":"int64","example":1},"dayOfWeek":{"type":"string","description":"Día de la semana","example":"TUESDAY","enum":["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"]},"startTime":{"$ref":"#/components/schemas/LocalTime"},"endTime":{"$ref":"#/components/schemas/LocalTime"},"activeNow":{"type":"boolean","description":"Indica si la regla está activa en este momento"}},"description":"DTO con información de una regla semanal"},"CreateWeeklyRuleRequest":{"required":["dayOfWeek","endTime","startTime"],"type":"object","properties":{"dayOfWeek":{"type":"string","description":"Día de la semana","example":"TUESDAY","enum":["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"]},"startTime":{"$ref":"#/components/schemas/LocalTime"},"endTime":{"$ref":"#/components/schemas/LocalTime"}},"description":"DTO para crear una regla semanal"},"UpdatePromotionRequest":{"type":"object","properties":{"name":{"maxLength":120,"minLength":0,"type":"string","description":"Nombre de la promoción","example":"3x2 en Tacos"},"description":{"type":"string","description":"Descripción detallada de la promoción"},"price":{"minimum":0.01,"exclusiveMinimum":false,"type":"number","description":"Precio total de la promoción","example":149.99},"startsAt":{"type":"string","description":"Fecha de inicio (solo para promociones temporales)","format":"date"},"endsAt":{"type":"string","description":"Fecha de fin (solo para promociones temporales)","format":"date"},"active":{"type":"boolean","description":"Estado activo de la promoción"},"productIds":{"uniqueItems":true,"type":"array","description":"IDs de los productos incluidos en la promoción","items":{"type":"integer","description":"IDs de los productos incluidos en la promoción","format":"int64"}},"weeklyRules":{"uniqueItems":true,"type":"array","description":"Reglas semanales (solo para promociones recurrentes)","items":{"$ref":"#/components/schemas/CreateWeeklyRuleRequest"}}},"description":"DTO para actualizar una promoción existente"},"ChangePasswordResponse":{"type":"object","properties":{"message":{"type":"string"},"username":{"type":"string"},"timestamp":{"type":"string","format":"date-time"}}},"ChangePasswordRequest":{"required":["confirmNewPassword","currentPassword","newPassword"],"type":"object","properties":{"currentPassword":{"type":"string"},"newPassword":{"maxLength":2147483647,"minLength":6,"type":"string"},"confirmNewPassword":{"type":"string"}}},"UpdateAvatarResponse":{"type":"object","properties":{"message":{"type":"string","description":"Mensaje que confirma la actualización del avatar.","example":"Avatar actualizado correctamente"},"avatarUrl":{"type":"string","description":"URL del nuevo avatar del usuario.","example":"http://localhost:8081/public/avatars/user123.jpg"},"username":{"type":"string","description":"Nombre de usuario al que pertenece el avatar actualizado.","example":"user123"},"timestamp":{"type":"string","description":"Marca de tiempo de la actualización del avatar.","format":"date-time"}},"description":"Respuesta devuelta tras la actualización del avatar de un usuario."},"CategoryInfo":{"type":"object","properties":{"id":{"type":"integer","description":"Identificador único de la categoría","format":"int64","example":1},"name":{"type":"string","description":"Nombre de la categoría","example":"Hamburguesas"}},"description":"Información básica de la categoría para incluir en respuestas de productos"},"ProductResponse":{"type":"object","properties":{"id":{"type":"integer","description":"Identificador único del producto","format":"int64","example":1},"name":{"type":"string","description":"Nombre del producto","example":"Hamburguesa Clásica"},"price":{"type":"number","description":"Precio del producto","example":15.99},"imageUrl":{"type":"string","description":"URL de la imagen del producto","example":"http://localhost:8081/public/images/hamburguesa-clasica.jpg"},"active":{"type":"boolean","description":"Indica si el producto está activo","example":true},"category":{"$ref":"#/components/schemas/CategoryInfo"}},"description":"Respuesta completa que contiene todos los detalles de un producto"},"ProductUpdateRequest":{"type":"object","properties":{"name":{"maxLength":120,"minLength":0,"type":"string","description":"Nuevo nombre del producto","example":"Hamburguesa Deluxe"},"price":{"minimum":0.01,"exclusiveMinimum":false,"type":"number","description":"Nuevo precio del producto","example":18.99},"active":{"type":"boolean","description":"Estado de activación del producto","example":true},"categoryId":{"type":"integer","description":"ID de la nueva categoría del producto","format":"int64","example":2}},"description":"Datos para actualizar un producto existente (sin imagen)"},"OrderDetailResponse":{"type":"object","properties":{"id":{"type":"integer","description":"ID único de la orden","format":"int64","example":1},"user":{"$ref":"#/components/schemas/UserSummaryResponse"},"status":{"type":"string","description":"Estado actual de la orden","example":"EN_PREPARACION","enum":["PENDIENTE","EN_PREPARACION","LISTO","ENTREGADO","CANCELADO"]},"subtotal":{"type":"number","description":"Subtotal de la orden","example":150.0},"tip":{"type":"number","description":"Propina","example":15.0},"total":{"type":"number","description":"Total de la orden","example":165.0},"estimatedTime":{"type":"string","description":"Tiempo estimado de entrega","example":"30:00"},"createdAt":{"type":"string","description":"Fecha y hora de creación","format":"date-time"},"deliveredAt":{"type":"string","description":"Fecha y hora de entrega","format":"date-time"},"items":{"type":"array","description":"Items de la orden","items":{"$ref":"#/components/schemas/OrderItemResponse"}}},"description":"DTO con información completa de una orden"},"OrderItemResponse":{"type":"object","properties":{"id":{"type":"integer","description":"ID único del item","format":"int64","example":1},"type":{"type":"string","description":"Tipo de item","example":"PRODUCT","enum":["PRODUCT","PROMOTION"]},"itemName":{"type":"string","description":"Nombre del item","example":"Taco de Pastor"},"imageUrl":{"type":"string","description":"URL de la imagen del item"},"quantity":{"type":"integer","description":"Cantidad","format":"int32","example":2},"unitPrice":{"type":"number","description":"Precio unitario","example":25.0},"lineTotal":{"type":"number","description":"Total de la línea","example":50.0}},"description":"DTO con información de un item de orden"},"UserSummaryResponse":{"type":"object","properties":{"id":{"type":"integer","description":"ID único del usuario","format":"int64","example":1},"fullName":{"type":"string","description":"Nombre completo del usuario","example":"Juan Pérez"},"email":{"type":"string","description":"Email del usuario","example":"juan.perez@example.com"}},"description":"DTO con información básica del usuario"},"CreateOrderItemRequest":{"required":["quantity","type"],"type":"object","properties":{"type":{"type":"string","description":"Tipo de item: PRODUCT o PROMOTION","example":"PRODUCT","enum":["PRODUCT","PROMOTION","PRODUCT","PROMOTION"]},"productId":{"type":"integer","description":"ID del producto (requerido si type es PRODUCT)","format":"int64","example":1},"promotionId":{"type":"integer","description":"ID de la promoción (requerido si type es PROMOTION)","format":"int64","example":1},"quantity":{"minimum":1,"type":"integer","description":"Cantidad de items","format":"int32","example":2}},"description":"DTO para crear un item de orden"},"CreateOrderRequest":{"required":["items"],"type":"object","properties":{"tip":{"minimum":0.00,"exclusiveMinimum":false,"type":"number","description":"Propina para el servicio","example":15.0},"items":{"type":"array","description":"Items de la orden","items":{"$ref":"#/components/schemas/CreateOrderItemRequest"}}},"description":"DTO para crear o actualizar una orden.\nSe utiliza tanto para la creación de una nueva orden como para la actualización completa de una orden existente.\nEl identificador de la orden a actualizar se debe enviar en la URL del endpoint (por ejemplo, PUT /orders/{orderId}).\n"},"CategorySimpleResponse":{"type":"object","properties":{"id":{"type":"integer","description":"Identificador único de la categoría","format":"int64","example":1},"name":{"type":"string","description":"Nombre de la categoría","example":"Bebidas"}},"description":"Respuesta simple que contiene solo información básica de la categoría"},"CategoryUpdateRequest":{"required":["name"],"type":"object","properties":{"name":{"maxLength":100,"minLength":0,"type":"string","description":"Nuevo nombre para la categoría","example":"Bebidas Frías"}},"description":"Datos para actualizar una categoría existente"},"CreatePromotionRequest":{"required":["name","price","productIds","type"],"type":"object","properties":{"name":{"maxLength":120,"minLength":0,"type":"string","description":"Nombre de la promoción","example":"2x1 en Tacos"},"description":{"type":"string","description":"Descripción detallada de la promoción","example":"Compra un taco y llévate otro gratis"},"price":{"minimum":0.01,"exclusiveMinimum":false,"type":"number","description":"Precio total de la promoción","example":99.99},"type":{"type":"string","description":"Tipo de promoción. TEMPORARY: promoción con fechas específicas de inicio y fin. RECURRING: promoción recurrente con horarios semanales","example":"TEMPORARY","enum":["TEMPORARY","RECURRING","TEMPORARY","RECURRING"]},"startsAt":{"type":"string","description":"Fecha de inicio (solo para promociones temporales)","format":"date","example":"2024-10-20"},"endsAt":{"type":"string","description":"Fecha de fin (solo para promociones temporales)","format":"date","example":"2024-10-25"},"productIds":{"uniqueItems":true,"type":"array","description":"IDs de los productos incluidos en la promoción","items":{"type":"integer","description":"IDs de los productos incluidos en la promoción","format":"int64"}},"weeklyRules":{"uniqueItems":true,"type":"array","description":"Reglas semanales (solo para promociones recurrentes)","items":{"$ref":"#/components/schemas/CreateWeeklyRuleRequest"}}},"description":"DTO para crear una nueva promoción"},"ProductCreateFormData":{"required":["categoryId","image","name","price"],"type":"object","properties":{"name":{"maxLength":120,"minLength":0,"type":"string","description":"Nombre del producto","example":"Hamburguesa Clásica"},"price":{"minimum":0.01,"exclusiveMinimum":false,"type":"number","description":"Precio del producto","example":15.99},"image":{"type":"string","format":"binary"},"active":{"type":"boolean","description":"Indica si el producto estará activo al crearlo","example":true,"default":true},"categoryId":{"type":"integer","description":"ID de la categoría a la que pertenece el producto","format":"int64","example":1}},"description":"Datos para crear un producto via multipart/form-data"},"CategoryCreateRequest":{"required":["name"],"type":"object","properties":{"name":{"maxLength":100,"minLength":0,"type":"string","description":"Nombre único de la categoría","example":"Bebidas"}},"description":"Datos requeridos para crear una nueva categoría"},"RegisterRequest":{"required":["email","name","password","username"],"type":"object","properties":{"username":{"maxLength":20,"minLength":3,"pattern":"^[a-zA-Z0-9_]+$","type":"string","description":"Nombre de usuario único. Solo se permiten letras, números y guiones bajos.","example":"daniel123"},"email":{"type":"string","description":"Correo electrónico válido del usuario.","example":"daniel@example.com"},"password":{"maxLength":100,"minLength":8,"pattern":"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[^a-zA-Z\\d]).{8,}$","type":"string","description":"Contraseña del usuario. Debe contener al menos una letra minúscula, una mayúscula,\nun número y un carácter especial. Longitud mínima de 8 caracteres.\n","example":"Abc123$%"},"name":{"maxLength":100,"minLength":0,"type":"string","description":"Nombre completo del usuario.","example":"Daniel Santiago"},"roles":{"uniqueItems":true,"type":"array","description":"Conjunto de roles asignados al nuevo usuario.","example":["ROLE_USER"],"items":{"type":"string","description":"Roles disponibles en el sistema.","example":"[\"ROLE_USER\"]","enum":["ROLE_USER","ROLE_ADMIN","ROLE_EMPLOYEE","ROLE_USER","ROLE_ADMIN","ROLE_EMPLOYEE"]},"enum":["ROLE_USER","ROLE_ADMIN","ROLE_EMPLOYEE"]}},"description":"Petición para registrar un nuevo usuario en el sistema."},"AuthResponse":{"type":"object","properties":{"accessToken":{"type":"string","description":"Token JWT de acceso generado para el usuario.","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"refreshToken":{"type":"string","description":"Token JWT de refresco, utilizado para generar nuevos tokens de acceso.","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"tokenType":{"type":"string","description":"Tipo de token devuelto. Generalmente 'Bearer'.","example":"Bearer"},"expiresInMs":{"type":"integer","description":"Tiempo de expiración del token de acceso en milisegundos.","format":"int64","example":3600000}},"description":"Respuesta devuelta tras un registro, login o refresh exitoso."},"RefreshRequest":{"required":["refreshToken"],"type":"object","properties":{"refreshToken":{"type":"string","description":"Token de refresco emitido durante el inicio de sesión.","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}},"description":"Petición para refrescar el token JWT de acceso."},"AuthRequest":{"required":["password","username"],"type":"object","properties":{"username":{"type":"string","description":"Nombre de usuario registrado.","example":"daniel123"},"password":{"type":"string","description":"Contraseña correspondiente al usuario.","example":"Abc123$%"}},"description":"Petición para autenticar a un usuario existente."},"PromotionImageRequest":{"type":"object","properties":{"imageFile":{"type":"string","format":"binary"}},"description":"DTO para subir imagen de promoción"},"ProductImageUpdateRequest":{"required":["image"],"type":"object","properties":{"image":{"type":"string","format":"binary"}},"description":"Datos para actualizar solo la imagen de un producto"},"ProductImageUpdateResponse":{"type":"object","properties":{"message":{"type":"string","description":"Mensaje de confirmación","example":"Imagen actualizada correctamente"},"imageUrl":{"type":"string","description":"URL de la nueva imagen","example":"http://localhost:8081/public/images/hamburguesa-deluxe_12345.jpg"},"productId":{"type":"integer","description":"ID del producto","format":"int64","example":1},"productName":{"type":"string","description":"Nombre del producto","example":"Hamburguesa Clásica"}},"description":"Respuesta tras actualizar la imagen de un producto"},"UpdateOrderTipRequest":{"required":["tip"],"type":"object","properties":{"tip":{"minimum":0.00,"exclusiveMinimum":false,"type":"number","description":"Nueva propina","example":20.0}},"description":"DTO para actualizar la propina de una orden"},"UpdateOrderStatusRequest":{"required":["status"],"type":"object","properties":{"status":{"type":"string","description":"Nuevo estado de la orden","example":"EN_PREPARACION","enum":["PENDIENTE","EN_PREPARACION","LISTO","ENTREGADO","CANCELADO","PENDIENTE","EN_PREPARACION","LISTO","ENTREGADO","CANCELADO"]}},"description":"DTO para actualizar el estado de una orden"},"UpdateOrderEstimatedTimeRequest":{"required":["estimatedTime"],"type":"object","properties":{"estimatedTime":{"pattern":"^\\d{2}:\\d{2}$","type":"string","description":"Tiempo estimado en formato MM:SS","example":"45:00"}},"description":"DTO para actualizar el tiempo estimado de una orden"},"OrderCancelledResponse":{"type":"object","properties":{"id":{"type":"integer","description":"ID único de la orden cancelada","format":"int64","example":1},"status":{"type":"string","description":"Estado final de la orden","example":"CANCELADO","enum":["PENDIENTE","EN_PREPARACION","LISTO","ENTREGADO","CANCELADO"]},"message":{"type":"string","description":"Mensaje de confirmación","example":"La orden ha sido cancelada exitosamente"},"cancelledAt":{"type":"string","description":"Fecha y hora de cancelación","format":"date-time"}},"description":"Respuesta cuando el usuario cancela una orden"},"OrderNotificationDto":{"type":"object","properties":{"orderId":{"type":"integer","description":"ID de la orden","format":"int64","example":1},"userId":{"type":"integer","description":"ID del usuario dueño de la orden","format":"int64","example":42},"userName":{"type":"string","description":"Nombre del usuario","example":"Juan Pérez"},"status":{"type":"string","description":"Estado actual de la orden","example":"EN_PREPARACION","enum":["PENDIENTE","EN_PREPARACION","LISTO","ENTREGADO","CANCELADO"]},"total":{"type":"number","description":"Total de la orden","example":250.5},"estimatedTime":{"type":"string","description":"Tiempo estimado de preparación","example":"00:30"},"createdAt":{"type":"string","description":"Fecha de creación de la orden","format":"date-time"},"updatedAt":{"type":"string","description":"Fecha de última actualización","format":"date-time"},"notificationType":{"type":"string","description":"Tipo de notificación WebSocket","example":"ORDER_STATUS_CHANGED","enum":["ORDER_CREATED","ORDER_UPDATED","ORDER_STATUS_CHANGED","ORDER_ESTIMATED_TIME_CHANGED","ORDER_CANCELLED"]},"message":{"type":"string","description":"Mensaje descriptivo de la notificación","example":"Tu orden #1 cambió a estado: EN_PREPARACION"}},"description":"Notificación de orden enviada por WebSocket"},"WebSocketInfo":{"type":"object","properties":{"endpoint":{"type":"string","description":"Endpoint de conexión WebSocket","example":"ws://localhost:8081/ws"},"protocol":{"type":"string","description":"Protocolo utilizado","example":"STOMP over WebSocket with SockJS fallback"},"employeesTopic":{"type":"string","description":"Topic para empleados","example":"/topic/orders/employees"},"userTopicPattern":{"type":"string","description":"Patrón del topic para usuarios","example":"/topic/orders/user/{userId}"},"documentation":{"type":"string","description":"Descripción del funcionamiento"},"ionicAngularExample":{"type":"string","description":"Ejemplo de implementación en Ionic/Angular"}},"description":"Información de configuración WebSocket"},"Pageable":{"type":"object","properties":{"page":{"minimum":0,"type":"integer","format":"int32"},"size":{"minimum":1,"type":"integer","format":"int32"},"sort":{"type":"array","items":{"type":"string"}}}},"PagePromotionSummaryResponse":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/PromotionSummaryResponse"}},"number":{"type":"integer","format":"int32"},"sort":{"type":"array","items":{"$ref":"#/components/schemas/SortObject"}},"first":{"type":"boolean"},"last":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"sort":{"type":"array","items":{"$ref":"#/components/schemas/SortObject"}},"unpaged":{"type":"boolean"},"paged":{"type":"boolean"},"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"}}},"PromotionSummaryResponse":{"type":"object","properties":{"id":{"type":"integer","description":"ID único de la promoción","format":"int64","example":1},"name":{"type":"string","description":"Nombre de la promoción","example":"2x1 en Tacos"},"imageUrl":{"type":"string","description":"URL de la imagen de la promoción"},"price":{"type":"number","description":"Precio total de la promoción","example":99.99},"type":{"type":"string","description":"Tipo de promoción","enum":["TEMPORARY","RECURRING"]},"active":{"type":"boolean","description":"Estado activo de la promoción"},"currentlyValid":{"type":"boolean","description":"Indica si la promoción está actualmente válida"}},"description":"DTO con información básica de una promoción"},"SortObject":{"type":"object","properties":{"direction":{"type":"string"},"nullHandling":{"type":"string"},"ascending":{"type":"boolean"},"property":{"type":"string"},"ignoreCase":{"type":"boolean"}}},"UserProfileResponse":{"type":"object","properties":{"id":{"type":"integer","description":"ID único del usuario.","format":"int64","example":1},"username":{"type":"string","description":"Nombre de usuario.","example":"user123"},"email":{"type":"string","description":"Correo electrónico del usuario.","example":"usuario@example.com"},"name":{"type":"string","description":"Nombre completo del usuario.","example":"Juan Pérez"},"avatarUrl":{"type":"string","description":"URL del avatar del usuario.","example":"http://localhost:8081/public/avatars/user123.jpg"},"registerDate":{"type":"string","description":"Fecha de registro del usuario.","format":"date-time"},"roles":{"uniqueItems":true,"type":"array","description":"Roles del usuario.","example":["USER"],"items":{"type":"string","description":"Roles del usuario.","example":"[\"USER\"]"}}},"description":"Información del perfil del usuario autenticado."},"ProductSearchResponse":{"type":"object","properties":{"id":{"type":"integer","description":"Identificador único del producto","format":"int64","example":1},"name":{"type":"string","description":"Nombre del producto","example":"Hamburguesa Clásica"},"price":{"type":"number","description":"Precio del producto","example":15.99},"imageUrl":{"type":"string","description":"URL de la imagen del producto","example":"http://localhost:8081/public/images/hamburguesa-clasica.jpg"},"active":{"type":"boolean","description":"Indica si el producto está activo","example":true},"categoryName":{"type":"string","description":"Nombre de la categoría","example":"Hamburguesas"}},"description":"Respuesta para búsquedas y filtros de productos"},"OrderSummaryResponse":{"type":"object","properties":{"id":{"type":"integer","description":"ID único de la orden","format":"int64","example":1},"status":{"type":"string","description":"Estado actual de la orden","example":"PENDIENTE","enum":["PENDIENTE","EN_PREPARACION","LISTO","ENTREGADO","CANCELADO"]},"subtotal":{"type":"number","description":"Subtotal de la orden","example":150.0},"tip":{"type":"number","description":"Propina","example":15.0},"total":{"type":"number","description":"Total de la orden","example":165.0},"estimatedTime":{"type":"string","description":"Tiempo estimado de entrega","example":"30:00"},"createdAt":{"type":"string","description":"Fecha y hora de creación","format":"date-time"},"totalItems":{"type":"integer","description":"Cantidad total de items","format":"int32","example":5}},"description":"DTO con información básica de una orden"},"TopSellingItemResponse":{"type":"object","properties":{"id":{"type":"integer","description":"ID del producto o promoción","format":"int64","example":5},"name":{"type":"string","description":"Nombre del producto o promoción","example":"Taco de Pastor"},"totalSold":{"type":"integer","description":"Cantidad total vendida","format":"int64","example":120},"type":{"type":"string","description":"Tipo de item: PRODUCT o PROMOTION","example":"PRODUCT","enum":["PRODUCT","PROMOTION"]}},"description":"DTO para productos o promociones más vendidos"},"OrderStatisticsResponse":{"type":"object","properties":{"totalOrders":{"type":"integer","description":"Total de órdenes registradas","format":"int64","example":150},"pendingOrders":{"type":"integer","description":"Órdenes pendientes","format":"int64","example":20},"completedOrders":{"type":"integer","description":"Órdenes completadas","format":"int64","example":110},"cancelledOrders":{"type":"integer","description":"Órdenes canceladas","format":"int64","example":20},"totalRevenue":{"type":"number","description":"Ingresos totales","example":25000.0}},"description":"DTO con estadísticas generales de órdenes"},"CategoryResponse":{"type":"object","properties":{"id":{"type":"integer","description":"Identificador único de la categoría","format":"int64","example":1},"name":{"type":"string","description":"Nombre de la categoría","example":"Bebidas"},"products":{"type":"array","description":"Lista de productos asociados a esta categoría","items":{"type":"string","description":"Lista de productos asociados a esta categoría"}}},"description":"Respuesta que contiene los detalles completos de una categoría"},"CategoryDetailedResponse":{"type":"object","properties":{"id":{"type":"integer","description":"Identificador único de la categoría","format":"int64","example":1},"name":{"type":"string","description":"Nombre de la categoría","example":"Bebidas"},"products":{"type":"array","description":"Lista completa de productos asociados a esta categoría","items":{"$ref":"#/components/schemas/ProductSummary"}}},"description":"Respuesta detallada que contiene la categoría con todos los detalles de sus productos"},"ProductSummary":{"type":"object","properties":{"id":{"type":"integer","description":"Identificador único del producto","format":"int64","example":1},"name":{"type":"string","description":"Nombre del producto","example":"Coca Cola"},"price":{"type":"number","description":"Precio del producto","example":2.5},"imageUrl":{"type":"string","description":"URL de la imagen del producto","example":"http://localhost:8081/public/product/product123.jpg"},"active":{"type":"boolean","description":"Indica si el producto está activo","example":true}},"description":"Resumen de un producto para mostrar en las respuestas de categoría"}},"securitySchemes":{"bearerAuth":{"type":"http","description":"Ingresa el token JWT en el formato: Bearer <token>","scheme":"bearer","bearerFormat":"JWT"}}}}